extends layout

block content
  div.page-header
    h1= title
      div.pull-right
        if user.isAdmin
          if tournament.status == 'open'
            a(href='/tournament/#{tournament._id}/close').btn Close enrollment
          if tournament.status == 'close'
            a(href='/tournament/#{tournament._id}/open').btn Open for enrollment
            if tournament.startable()
              a(href='/tournament/#{tournament._id}/start').btn.btn-primary Start tournament

  div.well
    table.table
      thead
        tr
          th #
          th Username
          th E-Mail
      tbody
        for entry, number in tournament.users
          tr
            td= number+1
            td= entry.username
            td= entry.email
  if tournament.status == 'open'
    if userInTournament
      form(action='/tournament/#{tournament._id}/leave', method='post')
        input(type='submit', value='Leave Tournament').btn
    else
      form(action='/tournament/#{tournament._id}/enter', method='post')
        input(type='submit', value='Enter Tournament').btn
  br
  a(href='/tournament/list').btn Back
